type GithubDataResponse = {
  issues: ReportData;
  pullRequests: ReportData;
  stars: ReportData;
  discussions: ReportData;
  mergedPullRequests: GithubReportData;
};
type ReportData = Array<[number, number]>;
type DataRecord = [number, number];

export const githubStars = $state<{ value?: DataRecord[] }>({});
export const githubIssues = $state<{ value?: DataRecord[] }>({});
export const githubPullRequests = $state<{ value?: DataRecord[] }>({});
export const githubDiscussions = $state<{ value?: DataRecord[] }>({});
export const githubMergedPullRequests = $state<{ value?: GithubDataRecord[] }>({});

export const loadGithubData = async () => {
  const response = await fetch('/api/github');
  if (response.ok) {
    const { stars, issues, pullRequests, discussions, mergedPullRequests } =
      (await response.json()) as GithubDataResponse;

    githubStars.value = stars;
    githubIssues.value = issues;
    githubPullRequests.value = pullRequests;
    githubDiscussions.value = discussions;
    githubMergedPullRequests.value = mergedPullRequests;
  }
};

export const redditMembers = $state<{ value?: DataRecord[] }>({});

export const loadRedditData = async () => {
  await Promise.resolve();

  redditMembers.value = [
    [1649635200, 2],
    [1660262400, 21],
    [1661040000, 26],
    [1661126400, 27],
    [1662076800, 38],
    [1665360000, 59],
    [1667952000, 87],
    [1669680000, 111],
    [1670025600, 112],
    [1671321600, 124],
    [1672358400, 137],
    [1672704000, 139],
    [1673308800, 160],
    [1673481600, 166],
    [1674259200, 180],
    [1674604800, 187],
    [1674691200, 189],
    [1674864000, 189],
    [1674950400, 191],
    [1676332800, 210],
    [1676851200, 215],
    [1677024000, 217],
    [1677283200, 221],
    [1677801600, 236],
    [1677888000, 238],
    [1677974400, 238],
    [1678579200, 246],
    [1678752000, 250],
    [1678838400, 250],
    [1679270400, 254],
    [1679443200, 257],
    [1679529600, 260],
    [1679961600, 267],
    [1680134400, 273],
    [1680307200, 281],
    [1680393600, 281],
    [1680480000, 289],
    [1680566400, 292],
    [1680652800, 299],
    [1680739200, 301],
    [1680825600, 306],
    [1680912000, 311],
    [1681084800, 319],
    [1681171200, 323],
    [1681344000, 332],
    [1681430400, 332],
    [1681603200, 335],
    [1681689600, 340],
    [1681776000, 341],
    [1681862400, 349],
    [1681948800, 351],
    [1682035200, 354],
    [1682208000, 360],
    [1682294400, 366],
    [1682380800, 368],
    [1682899200, 386],
    [1682985600, 389],
    [1683158400, 402],
    [1683590400, 410],
    [1683676800, 414],
    [1683849600, 418],
    [1684022400, 424],
    [1684108800, 431],
    [1684195200, 432],
    [1684281600, 433],
    [1684368000, 436],
    [1684454400, 444],
    [1684540800, 452],
    [1684627200, 461],
    [1684713600, 468],
    [1684800000, 474],
    [1684886400, 476],
    [1684972800, 485],
    [1685059200, 490],
    [1685145600, 493],
    [1685318400, 500],
    [1685491200, 521],
    [1685577600, 528],
    [1685664000, 528],
    [1685750400, 539],
    [1685836800, 548],
    [1685923200, 554],
    [1686096000, 567],
    [1686268800, 573],
    [1686355200, 577],
    [1686441600, 585],
    [1686960000, 585],
    [1687046400, 590],
    [1687219200, 595],
    [1687305600, 600],
    [1687478400, 615],
    [1687564800, 618],
    [1687651200, 623],
    [1687737600, 635],
    [1687824000, 643],
    [1687996800, 650],
    [1688083200, 655],
    [1688169600, 666],
    [1688256000, 670],
    [1688342400, 678],
    [1688428800, 683],
    [1688601600, 695],
    [1688688000, 700],
    [1688774400, 707],
    [1688860800, 713],
    [1688947200, 722],
    [1689033600, 730],
    [1689120000, 743],
    [1689206400, 744],
    [1689292800, 748],
    [1689552000, 766],
    [1689811200, 782],
    [1690156800, 817],
    [1690502400, 836],
    [1690588800, 846],
    [1690675200, 854],
    [1690761600, 871],
    [1690934400, 883],
    [1691193600, 897],
    [1691280000, 908],
    [1691366400, 916],
    [1691539200, 923],
    [1691625600, 927],
    [1692230400, 968],
    [1692403200, 978],
    [1692489600, 991],
    [1692576000, 1008],
    [1692662400, 1013],
    [1692748800, 1021],
    [1693180800, 1052],
    [1693267200, 1056],
    [1693353600, 1069],
    [1693612800, 1085],
    [1693699200, 1095],
    [1693785600, 1104],
    [1693872000, 1110],
    [1693958400, 1118],
    [1694044800, 1126],
    [1694217600, 1132],
    [1694304000, 1133],
    [1694390400, 1135],
    [1694563200, 1144],
    [1694649600, 1153],
    [1694736000, 1153],
    [1694908800, 1167],
    [1694995200, 1174],
    [1695168000, 1189],
    [1695254400, 1202],
    [1695340800, 1217],
    [1695427200, 1229],
    [1695513600, 1238],
    [1695600000, 1243],
    [1695686400, 1252],
    [1695772800, 1268],
    [1695945600, 1281],
    [1696032000, 1289],
    [1696118400, 1293],
    [1696204800, 1302],
    [1696464000, 1334],
    [1696550400, 1355],
    [1696636800, 1376],
    [1696723200, 1386],
    [1696809600, 1401],
    [1696896000, 1411],
    [1697155200, 1445],
    [1697241600, 1453],
    [1697328000, 1466],
    [1697414400, 1467],
    [1697500800, 1483],
    [1697587200, 1491],
    [1697673600, 1500],
    [1697760000, 1503],
    [1697932800, 1530],
    [1698019200, 1545],
    [1698192000, 1571],
    [1698364800, 1591],
    [1698451200, 1597],
    [1698537600, 1616],
    [1698624000, 1634],
    [1698710400, 1641],
    [1698796800, 1668],
    [1698883200, 1671],
    [1698969600, 1697],
    [1699142400, 1722],
    [1699228800, 1733],
    [1699315200, 1752],
    [1699401600, 1765],
    [1699660800, 1787],
    [1699833600, 1812],
    [1699920000, 1842],
    [1700006400, 1849],
    [1700092800, 1875],
    [1700179200, 1890],
    [1700265600, 1904],
    [1700352000, 1928],
    [1700438400, 1949],
    [1700524800, 1956],
    [1700611200, 1982],
    [1700784000, 2016],
    [1700870400, 2036],
    [1700956800, 2052],
    [1701043200, 2059],
    [1701129600, 2068],
    [1701216000, 2077],
    [1701388800, 2127],
    [1701475200, 2136],
    [1701561600, 2166],
    [1701648000, 2179],
    [1701734400, 2182],
    [1701820800, 2192],
    [1701907200, 2204],
    [1701993600, 2215],
    [1702080000, 2236],
    [1702166400, 2251],
    [1702252800, 2263],
    [1702339200, 2278],
    [1702425600, 2285],
    [1702512000, 2310],
    [1702598400, 2327],
    [1702684800, 2353], // historical data ends :(
    [1709528400, 4000], // discord message,
    [1712203200, 5000], // discord message
    [1734757200, 16000], // discord message
    [1738040400, 20000], // discord message
    [1745726400, 25611], // web archive
    [1747627200, 27000], // discord screenshot
    [1749960000, 28756], // reddit mod analytics
    [1752379200, 30378], // reddit mod analytics
    [1754625600, 32000], // reddit mod analytics
    [1755230400, 32500], // reddit mod analytics
    [1755783500, 33000], // reddit mod analytics
    [1756180800, 33500], // reddit mod analytics
    [1756699200, 34000], // reddit mod analytics
  ];
};
